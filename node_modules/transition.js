var crypto = require("crypto");
module.exports = {
  process: function(transitionFunction, payload, params) {
    var sha1 = crypto.createHash('sha1');
    sha1.update(JSON.stringify(payload));
    payload.previousHash = sha1.digest('base64');
    transitionFunction(payload.state, params);
    payload.lastUpdate = Date.now();
  }
}
